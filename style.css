/* CORE VARIABLES */
:root { 
    --primary: #6C63FF; 
    --secondary: #2A2A72; 
    --bg: #f4f7f6; 
    --glass: rgba(255, 255, 255, 0.98); 
}
/* --- PAGE TRANSITIONS --- */
        @keyframes slideUpFade {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* This class triggers the animation */
        .animate-view {
            animation: slideUpFade 0.4s ease-out forwards;
        }

        /* Make the List Property Page look distinct */
        #owner-section {
            background: #fff;
            min-height: 80vh;
            padding-top: 20px;
        }
        /* ADMIN STYLES */
        .admin-header { display: flex; gap: 20px; margin-bottom: 30px; }
        .stat-card { flex: 1; background: white; padding: 20px; border-radius: 15px; border-left: 5px solid var(--primary); box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        .stat-num { font-size: 32px; font-weight: 700; color: var(--secondary); }
        .verify-btn { background: #2ecc71; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 11px; }
        .verified-badge { background: #e3f2fd; color: #2ecc71; padding: 2px 6px; border-radius: 4px; font-size: 10px; border: 1px solid #2ecc71; }
        /* --- UTILITY CLASSES FROM INLINE STYLES --- */
        .modal-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
        .modal-header h2 { margin:0; }
        .modal-header .close-btn { font-size:24px; cursor:pointer; }

        /* --- FILTER MODAL STYLES --- */
        #filter-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 2000; display: flex; justify-content: center; align-items: center; backdrop-filter: blur(5px); }
        .filter-box { background: white; width: 95%; max-width: 500px; max-height: 90vh; overflow-y: auto; border-radius: 15px; padding: 25px; box-shadow: 0 20px 50px rgba(0,0,0,0.2); }
        
        .filter-section { margin-bottom: 20px; }
        .filter-section h4 { margin: 0 0 10px 0; font-size: 12px; color: #666; text-transform: uppercase; letter-spacing: 1px; }
        
        .filter-grid { display: flex; flex-wrap: wrap; gap: 10px; }
        .filter-chip { border: 1px solid #ddd; background: white; padding: 8px 15px; border-radius: 20px; font-size: 13px; cursor: pointer; transition: 0.2s; }
        .filter-chip.selected { background: var(--secondary); color: white; border-color: var(--secondary); }
        
        .range-labels { display: flex; justify-content: space-between; font-size: 12px; font-weight: 600; color: var(--primary); margin-bottom: 5px;}
        input[type=range] { width: 100%; padding: 0; margin: 0; }
        /* --- PROFESSIONAL DESIGN VARIABLES --- */
        :root { 
            --primary: #6C63FF; 
            --secondary: #2A2A72;
            --danger: #e74c3c;
            --bg: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --glass: rgba(255, 255, 255, 0.95);
            --shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        /* --- NEW UTILITY CLASSES --- */
        .text-center { text-align: center; }
        .w-auto { width: auto !important; }
        .mt-15 { margin-top: 15px; }
        .mt-50 { margin-top: 50px; }
        .mb-0 { margin-bottom: 0 !important; }
        .auth-card {
            max-width: 450px; margin: 50px auto; text-align: center;
        }
        
        * { box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; margin: 0; background: var(--bg); min-height: 100vh; color: #2d3436; }

        /* ANIMATIONS */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* NAV */
        nav { 
            background: var(--glass); padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000;
        }
        .logo { font-size: 24px; font-weight: 700; color: var(--secondary); cursor: pointer; display: flex; align-items: center; gap: 10px; }
        .nav-links { display: flex; gap: 20px; }
        .nav-links a { text-decoration: none; color: #636e72; font-weight: 500; cursor: pointer; transition: 0.3s; }
        .nav-links a:hover { color: var(--primary); }
        .btn-login { border: 2px solid var(--primary); color: var(--primary) !important; padding: 8px 25px; border-radius: 30px; font-weight: 600; }
        .btn-logout { margin-left: 20px; background: none; border: none; color: var(--danger); cursor: pointer; font-weight: 600; }
        .btn-login:hover { background: var(--primary); color: white !important; }

        /* UTILS */
        .container { max-width: 1100px; margin: 40px auto; padding: 0 20px; animation: fadeIn 0.8s ease; }
        .hidden { display: none !important; }
        .card { background: white; padding: 40px; border-radius: 20px; box-shadow: var(--shadow); margin-bottom: 25px; }
        
        /* INPUTS & BUTTONS */
        input, select, textarea { width: 100%; padding: 12px 15px; border: 1px solid #dfe6e9; border-radius: 10px; font-size: 14px; background: #f9f9f9; margin-bottom: 15px; }
        input:focus { outline: none; border-color: var(--primary); background: white; }
        
        .btn { padding: 15px; border-radius: 10px; border: none; cursor: pointer; font-weight: 600; width: 100%; transition: 0.3s; text-align: center; display: block; text-decoration: none; }
        .btn-primary { background: linear-gradient(45deg, var(--secondary), var(--primary)); color: white; box-shadow: 0 5px 15px rgba(108, 99, 255, 0.3); }
        .btn-primary:hover { transform: translateY(-2px); }
        .btn-outline { border: 1px solid var(--primary); background: transparent; color: var(--primary); }
        .btn-whatsapp { background: #25D366; color: white; }
        
        /* --- HOME PAGE SPECIFIC --- */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');
            background-size: cover; background-position: center; height: 500px;
            display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: white;
        }
        .search-hero { background: white; padding: 10px; border-radius: 50px; display: flex; gap: 10px; width: 90%; max-width: 600px; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        .search-hero input { border: none; background: transparent; margin: 0; padding: 10px 20px; }
        
        .grid-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 30px; }
        .prop-card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: 0.3s; cursor: pointer; }
        .prop-card:hover { transform: translateY(-10px); }
        .prop-img { height: 200px; width: 100%; object-fit: cover; }
        .prop-info { padding: 20px; }

        .blog-card { border-left: 5px solid var(--primary); padding: 20px; }
        
        footer { background: var(--secondary); color: white; padding: 50px 10%; margin-top: 50px; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 30px; }
        footer a { color: #b2bec3; display: block; margin-bottom: 10px; font-size: 14px; text-decoration: none; }

        /* --- DASHBOARD SPECIFIC --- */
        .map-box { height: 350px; width: 100%; border-radius: 15px; border: 2px solid white; box-shadow: inset 0 0 10px rgba(0,0,0,0.1); margin-top: 10px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th { text-align: left; background: #f1f2f6; padding: 10px; font-size: 12px; }
        td { padding: 12px; border-bottom: 1px solid #f1f2f6; font-size: 14px; }
        .status-badge { background: #fff3cd; color: #856404; padding: 4px 10px; border-radius: 15px; font-size: 11px; font-weight: bold; }
        
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; } 
        .full-width { grid-column: span 2; }
        
        /* IMAGE UPLOAD GRID */
        .upload-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; margin-bottom: 15px; }
        .upload-item { background: #f8f9fa; padding: 10px; border-radius: 10px; text-align: center; border: 1px dashed #ccc; }
        .upload-item label { font-size: 11px; font-weight: bold; display: block; margin-bottom: 5px; }
        .upload-item input { width: 100%; font-size: 10px; padding: 0; background: transparent; border: none; }

        .checkbox-group { display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 20px; }
        .checkbox-item { display: flex; align-items: center; gap: 5px; font-size: 13px; background: #f1f2f6; padding: 5px 10px; border-radius: 5px; }
        .checkbox-item input { width: auto; margin: 0; }

        .btn-sm { width: auto; padding: 5px 15px; font-size: 12px; display: inline-block; margin-right: 5px; border-radius: 5px; cursor: pointer; color: white; border: none; }
        .bg-orange { background: #f39c12; }
        .bg-red { background: #e74c3c; }

        /* --- PROPERTY DETAIL PAGE --- */
        .gallery-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 15px; height: 400px; margin-bottom: 30px; }
        .main-img { width: 100%; height: 100%; object-fit: cover; border-radius: 15px; background: #ddd; }
        .side-imgs { display: flex; flex-direction: column; gap: 15px; }
        .sub-img { width: 100%; height: 100%; object-fit: cover; border-radius: 15px; background: #eee; }
        
        .details-layout { display: grid; grid-template-columns: 2fr 1fr; gap: 40px; }
        .highlights { display: flex; gap: 20px; margin: 20px 0; border-top: 1px solid #eee; border-bottom: 1px solid #eee; padding: 20px 0; }
        .highlight-item { text-align: center; flex: 1; border-right: 1px solid #eee; font-size: 14px; }
        .highlight-item i { font-size: 20px; color: var(--primary); margin-bottom: 5px; }
        
        .amenity-tag { background: #e3f2fd; color: var(--primary); padding: 8px 15px; border-radius: 20px; font-size: 13px; display: inline-block; margin: 5px; }
        
        .price-card { position: sticky; top: 100px; border: 1px solid #eee; }
        .emi-box { background: #e3f2fd; padding: 20px; border-radius: 15px; margin-top: 30px; }

        /* --- NEW STYLES FOR MOBILE & LIGHTBOX --- */
        
        /* 1. Lightbox (Full Screen Zoom) */
        #lightbox {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.95); z-index: 9999; 
            display: flex; justify-content: center; align-items: center;
        }
        #lightbox img { max-width: 95%; max-height: 80vh; border-radius: 5px; }
        .close-lb { position: absolute; top: 20px; right: 20px; color: white; font-size: 30px; cursor: pointer; }

        /* 2. Gallery Layouts */
        /* --- FIXED GALLERY CSS --- */
        .gallery-desktop { 
            display: grid; 
            grid-template-columns: 2fr 1fr; /* Main image takes 2 parts, side images take 1 part */
            gap: 10px; 
            height: 400px; /* FORCE FIXED HEIGHT */
            width: 100%;
            margin-bottom: 20px;
            overflow: hidden; /* Cut off anything that sticks out */
        }
        
        .gallery-right { 
            display: grid; 
            grid-template-columns: 1fr 1fr; /* 2 columns */
            grid-template-rows: 1fr 1fr;    /* 2 rows */
            gap: 10px; 
            height: 100%;
        }
        
        .gal-img { 
            width: 100%; 
            height: 100%; /* Force image to match the box height */
            object-fit: cover; /* CRITICAL: Crops the image so it doesn't stretch */
            border-radius: 10px; 
            cursor: pointer; 
            transition: 0.3s; 
            background-color: #eee; /* Light gray background if image loads slow */
            display: block;
        }
        
        .gal-img:hover { opacity: 0.9; }

        .gallery-mobile { display: none; } /* Hidden on Desktop */

            /* --- PRO SEARCH BAR CSS --- */
            /* --- TABBED SEARCH BAR DESIGN --- */
            .hero-search-container {
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
                padding: 20px;
                border-radius: 15px;
                width: 90%;
                max-width: 700px;
                margin-top: 20px;
            }

            /* 1. The Tabs (Buy / Rent / Commercial) */
            .search-tabs {
                display: flex;
                gap: 10px;
                margin-bottom: 15px;
                justify-content: center;
            }
            
            .tab-item {
                color: white;
                padding: 8px 20px;
                cursor: pointer;
                font-weight: 500;
                opacity: 0.8;
                border-bottom: 3px solid transparent;
                transition: 0.3s;
            }
            
            .tab-item.active {
                opacity: 1;
                font-weight: 700;
                border-bottom: 3px solid var(--primary); /* Use brand color */
            }

            /* 2. The Search Box */
            .search-box-clean {
                background: white;
                border-radius: 8px;
                display: flex;
                align-items: center;
                padding: 5px;
                box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            }

            /* Location Dropdown / Icon */
            .city-select {
                border: none;
                /*border-right: 1px solid #ddd;*/
                padding: 5px; /* More compact padding */
                background: transparent;
                font-weight: 500; /* Less bold */
                font-size: 14px; /* Smaller font */
                color: #333;
                cursor: pointer;
                outline: none;
            }

            /* The Input Field */
            .search-box-clean input {
                border: none;
                width: 100%;
                padding: 15px;
                font-size: 15px;
                outline: none;
            }

            /* The Red Search Button */
            .search-btn-red {
                background: var(--primary);
                color: white;
                border: none;
                padding: 12px 30px;
                border-radius: 6px;
                font-weight: 600;
                font-size: 16px;
                cursor: pointer;
                transition: 0.3s;
            }
            .search-btn-red:hover { background: var(--secondary); }
            
            /* Filter Icon */
            .filter-icon-btn {
                padding: 10px 15px;
                cursor: pointer;
                color: #666;
                border-left: 1px solid #eee;
            }
            /* --- LOADING SPINNER CSS --- */
            #loading-overlay {
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(255, 255, 255, 0.9); z-index: 10000;
                display: flex; justify-content: center; align-items: center; flex-direction: column;
            }
            .spinner {
                width: 50px; height: 50px; border: 5px solid #e3e3e3;
                border-top: 5px solid var(--primary); border-radius: 50%;
                animation: spin 1s linear infinite;
            }
            @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
            /* --- EDIT PHOTO STYLES --- */
            .img-preview-box { position: relative; margin-top: 5px; display: none; } /* Hidden by default */
            .img-preview-box img { width: 100%; height: 80px; object-fit: cover; border-radius: 5px; border: 1px solid #ddd; }
            .btn-remove-img {
                position: absolute; top: -5px; right: -5px;
                background: red; color: white; border: none;
                border-radius: 50%; width: 20px; height: 20px;
                font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center;
            }
            /* --- FIND HOMES PAGE (SEARCH UI) --- */
            .search-layout { display: flex; height: calc(100vh - 70px); overflow: hidden; }
            
            /* Left Sidebar (Filters) */
            .filter-sidebar { 
                width: 400px; background: white; border-right: 1px solid #eee; 
                overflow-y: auto; padding: 20px; box-shadow: 2px 0 10px rgba(0,0,0,0.05); z-index: 100;
            }
            
            /* Top Tabs */
            .filter-tabs { display: flex; border-bottom: 2px solid #f1f2f6; margin-bottom: 20px; }
            .ft-btn { 
                flex: 1; text-align: center; padding: 12px; font-weight: 600; color: #888; 
                cursor: pointer; border-bottom: 3px solid transparent; transition: 0.3s;
            }
            .ft-btn.active { color: var(--primary); border-bottom-color: var(--primary); background: #f8f9fa; }

            /* Sections */
            .f-section { margin-bottom: 25px; border-bottom: 1px solid #f9f9f9; padding-bottom: 15px; }
            .f-title { font-size: 12px; font-weight: 700; color: #b2bec3; text-transform: uppercase; margin-bottom: 10px; letter-spacing: 1px; }

            /* Search Input */
            .search-loc-box { 
                display: flex; align-items: center; border: 1px solid #ddd; border-radius: 8px; padding: 10px; 
                margin-bottom: 20px; transition: 0.3s;
            }
            .search-loc-box:focus-within { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.1); }
            .search-loc-box input { border: none; outline: none; width: 100%; font-size: 14px; margin: 0; padding-left: 10px; }

            /* Grid Chips (Property Type, etc) */
            .chip-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
            .chip { 
                border: 1px solid #e0e0e0; border-radius: 5px; padding: 10px; text-align: center; 
                font-size: 13px; cursor: pointer; transition: 0.2s; color: #555; background: white;
            }
            .chip:hover { border-color: var(--primary); color: var(--primary); }
            .chip.selected { background: var(--secondary); color: white; border-color: var(--secondary); }

            /* Range Sliders */
            .range-wrap { margin-top: 10px; }
            .range-val { display: flex; justify-content: space-between; font-weight: 600; font-size: 14px; color: var(--primary); margin-bottom: 5px; }
            input[type=range] { width: 100%; cursor: pointer; accent-color: var(--primary); height: 5px; }

            /* Bottom Search Button */
            .sticky-search-btn {
                position: sticky; bottom: 0; background: white; padding-top: 10px; border-top: 1px solid #eee;
            }

            /* Right Map Area */
            .map-container-full { position: relative; flex: 1; }
            #tenant-map { width: 100%; height: 100%; }
            .btn-map-back {
                position: absolute; top: 20px; left: 20px; z-index: 1000;
                background: white; border: none; padding: 10px 15px; border-radius: 30px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1); cursor: pointer; font-weight: 600;
            }

            /* --- CONSOLIDATED MEDIA QUERY --- */
            @media (max-width: 768px) {
                /* Layouts */
                .form-grid, .details-layout, .gallery-grid, footer { grid-template-columns: 1fr; }
                .full-width { grid-column: span 1; }

                /* Navigation */
                nav { padding: 15px; flex-direction: column; gap: 10px; }
                .nav-links { width: 100%; justify-content: center; gap: 15px; }
                .logo { margin-bottom: 5px; }

                /* Search Page (Tenant View) */
                .search-layout { 
                    display: flex !important;
                    flex-direction: column !important;
                    height: auto !important; /* Allow scrolling */
                    overflow: visible !important;
                }
                .map-container-full { 
                    order: -1; /* Moves map to top */
                    height: 300px !important;
                    flex: none; /* IMPORTANT: Reset flex behavior for the mobile column layout */
                    min-height: 300px; /* Add a minimum height safeguard */
                    width: 100% !important;
                    position:relative; /* Ensure positioning context */
                    flex-shrink: 0; /* Prevent the map from shrinking */
                }
                #tenant-map { height: 100% !important; width: 100% !important; }
                .filter-sidebar { 
                    order: 2; /* Filters below map */
                    width: 100% !important; 
                    height: auto !important;
                    overflow-y: visible !important;
                    padding-bottom: 80px;
                }
                .sticky-search-btn {
                    position: fixed; 
                    bottom: 0; left: 0; width: 100%; 
                    padding: 15px; background: white; 
                    border-top: 1px solid #ddd; z-index: 1000;
                }

                /* Property Detail Page */
                .gallery-desktop { display: none; }
                .gallery-mobile { 
                    display: flex; overflow-x: auto; gap: 10px; padding-bottom: 10px; scroll-snap-type: x mandatory; 
                }
                .gallery-mobile img { 
                    width: 85vw; height: 250px; object-fit: cover; border-radius: 10px; flex-shrink: 0; scroll-snap-align: center; 
                }
                .gallery-grid { height: 250px; }
                .highlights { flex-wrap: wrap; gap: 10px; }
                .highlight-item { flex: 1 1 40%; margin-bottom: 10px; }
                .price-card { position: static; margin-top: 20px; }
            }