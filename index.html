<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EstatePro - Full Platform</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="filter-modal" class="hidden">
        <div class="filter-box">
            <div class="modal-header">
                <h2>‚öôÔ∏è Filters</h2>
                <span id="filter-modal-close" class="close-btn">&times;</span>
            </div>

            <div class="filter-section">
                <h4>I want to...</h4>
                <div class="filter-grid" id="f-listing">
                    <span class="filter-chip selected" onclick="selectOpt('f-listing', this, 'Buy')">Buy</span>
                    <span class="filter-chip" onclick="selectOpt('f-listing', this, 'Rent')">Rent</span>
                </div>
            </div>

            <div class="filter-section">
                <h4>Property Type</h4>
                <div class="filter-grid" id="f-prop">
                    <span class="filter-chip" onclick="selectOpt('f-prop', this, 'House')">House</span>
                    <span class="filter-chip" onclick="selectOpt('f-prop', this, 'Apartment')">Apartment</span>
                    <span class="filter-chip" onclick="selectOpt('f-prop', this, 'Office')">Office</span>
                    <span class="filter-chip" onclick="selectOpt('f-prop', this, 'Shop')">Shop</span>
                </div>
            </div>

            <div class="filter-section">
                <h4>Max Price: <span id="price-val">Any</span></h4>
                <input type="range" min="0" max="50000000" step="1000" value="0" oninput="updateRange('price-val', this.value, '‚Çπ ')">
            </div>

            <div class="filter-section">
                <h4>Max Area: <span id="sqft-val">Any</span></h4>
                <input type="range" min="0" max="10000" step="100" value="0" oninput="updateRange('sqft-val', this.value, '', ' sqft')">
            </div>

            <button id="apply-filters-btn" class="btn btn-primary">Apply Filters</button>
        </div>
    </div>
    <div id="loading-overlay" class="hidden">
        <div class="spinner"></div>
        <p id="loading-msg" style="margin-top:15px; font-weight:600; color:#666;">Processing...</p>
    </div>
    <div id="lightbox" class="hidden" onclick="closeLightbox()" style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:9999; display:flex; justify-content:center; align-items:center; flex-direction:column;">
        <span id="lightbox-close" style="position:absolute; top:20px; right:30px; color:white; font-size:40px; cursor:pointer;">&times;</span>
        <img id="lightbox-img" src="" style="max-width:90%; max-height:80vh; border-radius:5px; box-shadow:0 0 20px rgba(255,255,255,0.2);">
    </div>

    <nav>
        <div id="logo" class="logo">üè† EstatePro</div>
        <div class="nav-links">
            <a id="nav-home">Home</a>
            <a id="nav-list-property">List Property</a>
            <a id="nav-login" class="btn-login">Login</a>
        </div> 
        <button id="logout-btn" class="hidden btn-logout">Logout</button>
    </nav>

    <div id="home-page">
        <header class="hero">
            <h1 class="mb-0">Find Your Perfect Home</h1>
            
            <div class="hero-search-container">
                <div class="search-tabs">
                    <div class="tab-item" onclick="setSearchTab(this,'Buy')">Buy</div> 
                    <div class="tab-item" data-value="Rent">Rent</div>
                    <div class="tab-item" data-value="Commercial">Commercial</div>
                </div>

                <div class="search-box-clean">
                    <select class="city-select">
                        <option>Chennai</option>
                        <option>Bangalore</option>
                    </select>

                    <input type="text" id="home-search-input" placeholder="Search up to 3 Localities..." autocomplete="off" name="search_unique_xyz">
                    
                    <div id="hero-filter-btn" class="filter-icon-btn" title="Advanced Filters">
                        <i class="fas fa-sliders-h"></i>
                    </div>

                    <button id="hero-search-btn" class="search-btn-red">
                        Search
                    </button>
                </div>
            </div>
        </header>

        <div class="container">
            <h2 class="text-center mt-50">Featured Properties</h2>
            <div class="grid-container" id="featured-list">
                <p style="text-align:center; width:100%;">Loading latest properties...</p>
            </div>

            <h2 class="text-center" style="margin-top: 60px;">Latest Real Estate News</h2>
            <div class="grid-container">
                <div class="card blog-card">
                    <h4>üìà Top 5 Areas to Invest</h4>
                    <p style="font-size:12px; color:#999;">Oct 12, 2025</p>
                    <p style="color:#666; font-size:14px;">Anna Nagar and OMR are seeing the highest appreciation...</p>
                </div>
                <div class="card blog-card">
                    <h4>üí∞ Home Loan Rates Drop</h4>
                    <p style="font-size:12px; color:#999;">Nov 01, 2025</p>
                    <p style="color:#666; font-size:14px;">New RBI policies make buying more affordable...</p>
                </div>
                <div class="card blog-card">
                    <h4>üè° Interior Design Trends</h4>
                    <p style="font-size:12px; color:#999;">Nov 20, 2025</p>
                    <p style="color:#666; font-size:14px;">Minimalist designs are taking over the 2025 scene...</p>
                </div>
            </div>
        </div>

        <footer>
                <div>
                    <h4>EstatePro</h4>
                    <p style="font-size:13px; opacity:0.8;">The #1 Real Estate platform in Chennai.</p>
                </div>
                <div>
                    <h4>Company</h4>
                    <a href="#">About Us</a>
                    <a href="#">Careers</a>
                    <a href="#">Contact</a>
                </div>
                <div>
                    <h4>Legal</h4>
                    <a href="#">Terms</a>
                    <a href="#">Privacy</a>
                </div>
                <div>
                    <h4>Social</h4>
                    <a href="#">Facebook</a>
                    <a href="#">Instagram</a>
                </div>
        </footer>
    </div>

    <div id="admin-dashboard" class="container hidden">
        <h2 style="margin-bottom:20px;">üëÆ‚Äç‚ôÇÔ∏è Admin Control Panel</h2>
        
        <div class="admin-header">
            <div class="card" style="margin-bottom: 25px;">
                <h3>Platform Analytics</h3>
                <div style="height: 300px; width: 100%; display: flex; justify-content: center;">
                    <canvas id="listingChart"></canvas>
                </div>
            </div>
            <div class="stat-card">
                <h4>Total Users</h4>
                <div class="stat-num" id="stat-users">0</div>
            </div>
            <div class="stat-card">
                <h4>Total Listings</h4>
                <div class="stat-num" id="stat-props">0</div>
            </div>
        </div>

        <div class="card">
            <h3>All Properties Database</h3>
            <div style="overflow-x:auto;">
                <table style="width:100%; border-collapse:collapse;">
                    <thead><tr style="background:#eee; text-align:left;"><th>Details</th><th>Owner</th><th>Status</th><th>Action</th></tr></thead>
                    <tbody id="admin-table-body"></tbody>
                </table>
            </div>
            <button class="btn btn-primary" onclick="loadAdminData()" style="width:auto; margin-top:15px;">Refresh Data</button>
        </div>
    </div>

    <div id="app-section" class="container hidden">
        
        <div id="auth-section" class="card auth-card">
            <h2 id="auth-title">Welcome Back</h2>
            
            <div id="signup-fields" class="hidden">
                <input type="text" id="reg-name" placeholder="Full Name">
                <input type="tel" id="reg-phone" placeholder="Phone Number">
            </div>

            <input type="email" id="email-input" placeholder="Email Address">
            <input type="password" id="pass-input" placeholder="Password">
            
            <button id="auth-btn" class="btn btn-primary">Login</button>
            
            <div style="margin-top:20px; display:flex; justify-content:space-between; font-size:13px;">
                <span id="switch-text" style="color:var(--primary); cursor:pointer; font-weight:600;">New here? Create Account</span>
                <span id="auth-back-home" style="color:#666; cursor:pointer;">‚Üê Back to Home</span>
            </div>
        </div>

        <div id="owner-section" class="hidden">
            <div class="card">
                <h2>üìä My Listings</h2>
                <div style="overflow-x:auto;">
                    <table><thead><tr><th>Property</th><th>Status</th><th>Actions</th></tr></thead><tbody id="my-listings-body"></tbody></table>
                </div>
                <button id="refresh-listings-btn" class="btn btn-primary w-auto mt-15">Refresh Status</button>
            </div>

            <div class="card" id="listing-form-card">
                <h2 id="form-title">üìç List New Property</h2>
                <div class="form-grid">
                    <input type="text" id="fname" placeholder="Owner Name">
                    <input type="tel" id="phone" placeholder="Contact Phone">
                    
                    <div class="full-width">
                        <label style="font-size:12px; font-weight:600; color:#666;">Listing Type</label>
                        <select id="o-listingType" style="background:#eef2f3;">
                            <option value="Rent">For Rent</option>
                            <option value="Buy">For Sale</option>
                        </select>
                    </div>

                    <div class="full-width"><input type="text" id="house" placeholder="Full Address (House No, Street)"></div>
                    <input type="text" id="area" placeholder="Area / Neighborhood">
                    <input type="text" id="city" value="Chennai">
                    
                    <input type="number" id="price" placeholder="Price / Rent (‚Çπ)">
                    <input type="number" id="sqft" placeholder="Size (Sq. Ft)">
                    
                    <div>
                        <label style="font-size:11px; font-weight:bold;">Property Type</label>
                        <select id="o-propType">
                            <option value="Apartment">Apartment</option>
                            <option value="House">Independent House</option>
                            <option value="Villa">Villa</option>
                            <option value="Office Space">Office Space</option>
                            <option value="Shop">Shop</option>
                            <option value="Showroom">Showroom</option>
                            <option value="Co-Working">Co-Working</option>
                            <option value="Warehouse">Warehouse</option>
                            <option value="Industrial">Industrial Bldg</option>
                            <option value="Restaurant">Restaurant/Cafe</option>
                        </select>
                    </div>

                    <div>
                        <label style="font-size:11px; font-weight:bold;">Building Type</label>
                        <select id="o-buildType">
                            <option value="Independent">Independent Building</option>
                            <option value="Mall">Mall</option>
                            <option value="Business Park">Business Park</option>
                            <option value="Standalone">Standalone Commercial</option>
                            <option value="Gated Community">Gated Community</option>
                        </select>
                    </div>

                    <div>
                        <label style="font-size:11px; font-weight:bold;">Furnishing</label>
                        <select id="o-furnish">
                            <option value="Semi">Semi-Furnished</option>
                            <option value="Full">Fully Furnished</option>
                            <option value="None">Unfurnished</option>
                        </select>
                    </div>

                    <div>
                        <label style="font-size:11px; font-weight:bold;">Parking</label>
                        <select id="o-parking">
                            <option value="Reserved">Reserved Parking</option>
                            <option value="Public">Public / Street</option>
                            <option value="None">No Parking</option>
                        </select>
                    </div>

                    <select id="beds"><option value="">Beds (If House)</option><option value="1">1 BHK</option><option value="2">2 BHK</option><option value="3">3 BHK</option><option value="4">4+ BHK</option></select>
                    <select id="baths"><option value="">Baths</option><option value="1">1 Bath</option><option value="2">2 Baths</option><option value="3">3+ Baths</option></select>
                    
                    <div class="full-width"><textarea id="desc" rows="3" placeholder="Description (e.g. Near Metro, Sea Facing)"></textarea></div>
                    <div class="full-width" style="margin-top:20px;">
                        <label style="font-weight:600; color:#555;">Upload Photos:</label>
                        <div class="upload-grid">
                            
                            <div class="upload-item">
                                <label>Outer</label>
                                <input type="file" id="img-outer">
                                <div id="preview-outer" class="img-preview-box" data-type="outer">
                                    <img src="">
                                    <button class="btn-remove-img">√ó</button>
                                </div>
                            </div>

                            <div class="upload-item">
                                <label>Hall</label>
                                <input type="file" id="img-hall">
                                <div id="preview-hall" class="img-preview-box" data-type="hall">
                                    <img src="">
                                    <button class="btn-remove-img">√ó</button>
                                </div>
                            </div>

                            <div class="upload-item">
                                <label>Bed</label>
                                <input type="file" id="img-bed">
                                <div id="preview-bed" class="img-preview-box" data-type="bed">
                                    <img src="">
                                    <button class="btn-remove-img">√ó</button>
                                </div>
                            </div>

                            <div class="upload-item">
                                <label>Kitchen</label>
                                <input type="file" id="img-kitchen">
                                <div id="preview-kitchen" class="img-preview-box" data-type="kitchen">
                                    <img src="">
                                    <button class="btn-remove-img">√ó</button>
                                </div>
                            </div>

                            <div class="upload-item">
                                <label>Bath</label>
                                <input type="file" id="img-bath">
                                <div id="preview-bath" class="img-preview-box" data-type="bath">
                                    <img src="">
                                    <button class="btn-remove-img">√ó</button>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

                <h4 style="margin-top:20px;">Amenities</h4>
                <div class="checkbox-group">
                    <div class="checkbox-item"><input type="checkbox" class="amenity-chk" value="Lift"> Lift</div>
                    <div class="checkbox-item"><input type="checkbox" class="amenity-chk" value="Gym"> Gym</div>
                    <div class="checkbox-item"><input type="checkbox" class="amenity-chk" value="Parking"> Parking</div>
                    <div class="checkbox-item"><input type="checkbox" class="amenity-chk" value="Security"> Security</div>
                    <div class="checkbox-item"><input type="checkbox" class="amenity-chk" value="Power Backup"> Power Backup</div>
                </div>

                <h4 style="margin-top:20px;">Pin Exact Location</h4>
                <div style="position:relative;">
                    <input type="text" id="owner-map-search" placeholder="Search Map (e.g. T Nagar)" style="position:absolute; top:10px; left:50px; z-index:999; width:200px;">
                    <button id="owner-map-search-btn" style="position:absolute; top:10px; left:260px; z-index:999; width:40px; padding:10px; cursor:pointer;">üîç</button>
                    <div id="owner-map" class="map-box"></div>
                </div>
                <p id="coords-display" style="text-align:center; color:green; display:none; margin-top:5px;">‚úÖ Location Pinned!</p>

                <button class="btn btn-primary" id="submit-btn" style="margin-top:20px;">Submit Listing</button>
                <button class="btn btn-outline hidden" id="cancel-edit-btn" style="margin-top:5px;">Cancel Edit</button>
            </div>
        </div>

        <div id="tenant-section" class="hidden">
        <div class="search-layout">
            
            <div class="filter-sidebar">
                
                <div class="filter-tabs">
                    <div class="ft-btn active" data-value="Buy">Buy</div>
                    <div class="ft-btn" data-value="Rent">Rent</div>
                    <div class="ft-btn" data-value="Commercial">Commercial</div>
                </div>

                <div class="search-loc-box">
                    <i class="fas fa-search" style="color:#888;"></i>
                    <input type="text" id="f-loc" placeholder="Search Locality (e.g. Anna Nagar)">
                </div>

                <div class="f-section">
                    <div class="f-title">Property Type</div>
                    <div class="chip-grid" id="f-prop-grid">
                        <div class="chip" onclick="selectSingle('f-prop-grid', this, 'Office Space')">Office Space</div>
                        <div class="chip" onclick="selectSingle('f-prop-grid', this, 'Co-Working')">Co-Working</div>
                        <div class="chip" onclick="selectSingle('f-prop-grid', this, 'Shop')">Shop</div>
                        <div class="chip" onclick="selectSingle('f-prop-grid', this, 'Showroom')">Showroom</div>
                        <div class="chip" onclick="selectSingle('f-prop-grid', this, 'Warehouse')">Warehouse</div>
                        <div class="chip" onclick="selectSingle('f-prop-grid', this, 'Industrial')">Industrial</div>
                        <div class="chip" onclick="selectSingle('f-prop-grid', this, 'Restaurant')">Restaurant</div>
                        <div class="chip" onclick="selectSingle('f-prop-grid', this, 'House')">House/Villa</div>
                        <div class="chip" onclick="selectSingle('f-prop-grid', this, 'Apartment')">Apartment</div>
                    </div>
                </div>

                <div class="f-section">
                    <div class="f-title">Price Range</div>
                    <div class="range-wrap">
                        <div class="range-val"><span>‚Çπ 0</span><span id="disp-price">Any</span></div>
                        <input type="range" min="0" max="100000000" step="1000" value="0" oninput="updateRangeLabel('disp-price', this.value, '‚Çπ ')">
                    </div>
                </div>

                <div class="f-section">
                    <div class="f-title">Built-Up Area</div>
                    <div class="range-wrap">
                        <div class="range-val"><span>0 sq.ft</span><span id="disp-sqft">Any</span></div>
                        <input type="range" min="0" max="10000" step="100" value="0" oninput="updateRangeLabel('disp-sqft', this.value, '', ' sqft')">
                    </div>
                </div>

                <div class="f-section">
                    <div class="f-title">Furnishing</div>
                    <div class="chip-grid" id="f-furnish-grid" style="grid-template-columns: 1fr 1fr 1fr;">
                        <div class="chip" onclick="selectSingle('f-furnish-grid', this, 'Full')">Full</div>
                        <div class="chip" onclick="selectSingle('f-furnish-grid', this, 'Semi')">Semi</div>
                        <div class="chip" onclick="selectSingle('f-furnish-grid', this, 'None')">None</div>
                    </div>
                </div>

                <div class="f-section">
                    <div class="f-title">Building Type</div>
                    <div class="chip-grid" id="f-build-grid">
                        <div class="chip" onclick="selectSingle('f-build-grid', this, 'Independent')">Independent</div>
                        <div class="chip" onclick="selectSingle('f-build-grid', this, 'Mall')">Mall</div>
                        <div class="chip" onclick="selectSingle('f-build-grid', this, 'Business Park')">Business Park</div>
                        <div class="chip" onclick="selectSingle('f-build-grid', this, 'Standalone')">Standalone</div>
                    </div>
                </div>

                <div class="f-section">
                    <div class="f-title">Parking</div>
                    <div class="chip-grid" id="f-park-grid">
                        <div class="chip" onclick="selectSingle('f-park-grid', this, 'Public')">Public</div>
                        <div class="chip" onclick="selectSingle('f-park-grid', this, 'Reserved')">Reserved</div>
                    </div>
                </div>

                <div class="sticky-search-btn">
                    <button id="tenant-search-btn" class="btn btn-primary">SEARCH</button>
                </div>
            </div>

            <div class="map-container-full">
                <div id="tenant-map"></div>
                <button id="tenant-back-btn" class="btn-map-back">‚Üê Back</button>
            </div>
        </div>
    </div>

    <div id="property-page" class="hidden">
        <div class="container">
            <button id="property-page-back-btn" style="background:none; border:none; cursor:pointer; margin-bottom:15px; font-size:16px;">‚Üê Back to Map</button>
            
            <div class="gallery-desktop">
                <img id="dt-img-1" class="gal-img" onclick="openLightbox(this.src)" 
                     onerror="this.src='https://via.placeholder.com/800x600?text=No+Image'">
                
                <div class="gallery-right">
                    <img id="dt-img-2" class="gal-img" onclick="openLightbox(this.src)" 
                         onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
                    <img id="dt-img-3" class="gal-img" onclick="openLightbox(this.src)" 
                         onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
                    <img id="dt-img-4" class="gal-img" onclick="openLightbox(this.src)" 
                         onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
                    <img id="dt-img-5" class="gal-img" onclick="openLightbox(this.src)" 
                         onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
                </div>
            </div>
            
            <div class="gallery-mobile">
                <img id="m-img-1" onclick="openLightbox(this.src)" onerror="this.src='https://via.placeholder.com/800x600?text=No+Image'">
                <img id="m-img-2" onclick="openLightbox(this.src)" onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
                <img id="m-img-3" onclick="openLightbox(this.src)" onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
                <img id="m-img-4" onclick="openLightbox(this.src)" onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
                <img id="m-img-5" onclick="openLightbox(this.src)" onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
            </div>
            
            <div class="details-layout">
                <div class="main-content">
                    <h1 id="dt-title" style="margin:0;">Property Title</h1>
                    <p id="dt-addr" style="color:#666; margin-top:5px;">Address Location</p>
                    
                    <div class="highlights">
                        <div class="highlight-item"><i class="fas fa-ruler-combined"></i><br><b><span id="dt-sqft"></span></b> Sqft</div>
                        <div class="highlight-item"><i class="fas fa-bed"></i><br><b><span id="dt-beds"></span></b> Beds</div>
                        <div class="highlight-item"><i class="fas fa-bath"></i><br><b><span id="dt-baths"></span></b> Baths</div>
                        <div class="highlight-item"><i class="fas fa-couch"></i><br><b><span id="dt-furnish"></span></b></div>
                    </div>

                    <h3>Description</h3>
                    <p id="dt-desc" style="color:#555; line-height:1.6;"></p>

                    <h3>Amenities</h3>
                    <div id="dt-amenities" style="margin-bottom:30px;"></div>

                    <h3>Location</h3>
                    <div id="detail-map" class="map-box" style="height:250px;"></div>
                    <a id="dt-sv" href="#" target="_blank" class="btn btn-outline" style="margin-top:15px;">üëÄ Open 360¬∞ Street View</a>

                    <div class="emi-box">
                        <h3 style="margin-top:0;">EMI Calculator</h3>
                        <input type="number" id="loan-amount" placeholder="Loan Amount (e.g. 5000000)" oninput="calculateEMI()">
                        <div style="text-align:center; font-size:20px; font-weight:700; color:var(--primary); margin-top:10px;">Monthly EMI: <span id="emi-val">‚Çπ 0</span></div>
                    </div>
                </div>

                <div class="sidebar">
                    <div class="card price-card">
                        <div style="font-size:32px; font-weight:700; color:var(--secondary);">‚Çπ <span id="dt-price"></span></div>
                        <hr style="border:0; border-top:1px solid #eee; margin:20px 0;">
                        <h4>Owner Details</h4>
                        <p style="font-size:18px; font-weight:600;"><span id="dt-owner"></span></p>
                        <a id="dt-call" href="#" class="btn btn-primary"><i class="fas fa-phone"></i> Call Now</a>
                        <a id="dt-wa" href="#" target="_blank" class="btn btn-whatsapp" style="margin-top:10px;"><i class="fab fa-whatsapp"></i> WhatsApp</a>
                    </div>
                    
                    <div class="card">
                        <h4>Nearby Essentials</h4>
                        <ul style="padding-left:20px; line-height:2; color:#666;">
                            <li>üè´ School: 0.5 km</li>
                            <li>üè• Hospital: 1.2 km</li>
                            <li>üöÜ Metro: 2.0 km</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    
</body>
</html>